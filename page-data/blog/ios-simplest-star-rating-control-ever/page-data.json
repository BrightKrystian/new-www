{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/ios-simplest-star-rating-control-ever","result":{"data":{"markdownRemark":{"html":"<p>Recently I had a need to show the simple rating control in one of our iOS apps - the typical row of stars, few leftmost highlighted, the more highlighted, the better the rating is - something as obvious as this:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3f4011f9c7d95964fedd1f91184aca2c/5a46d/star-rating-example.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.27027027027026%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACHUlEQVQoz5WS20/bMBTG+dv3tgdetpc9gFakLQVVpRQIGioUSEcrWsSAClrahqJEvU3kUhwn8SX+tvSCYG/7yT6SLX/nO/bxCgBwgkSAv8wiQcLBA8gYIgSQJAmWSCkTKZVS8+VKGi4/wj7G1Woabz7hcRetDdxvoK9L4Nw4+3F4WCwWc7lcsbir63q7/QBAKTUThxPEHqJnxC4iJx1sCjpMN4HhYNDt9h5Ns9czLcueTCa+778R+11ELrxuetrrpVl8kycQMlFKhSF1HJcxFseR63qO477eYib+tQr7BDefYZfR/IK+jtZXn8Q0eFFKGacn62trmUzmu6YZhrFT2JnbLsVz1GJCCSj55pEEYyyKojiOhZCc8ffO/X24bTzp8Dro78WMURqGYRhFEYCb6+vhcDgYDHqmORqnXFzUOedLcfsbJg3V2VLjS3SyISU0oAEhYZi26rh01Gw2c7lcPp8/PatUz881LetPp+/L/n9m4vsMJle4X2fk9/QlNSSEBEFAKQVQPiqVSqV9Xd8ubFdrtZNyuVqtVWvVpdguw32AVRLUCSMWRwsYYwCat7eNRsMwKvV6vZLys9vttFqtJJn3WcZQi08474FaAkAI8fofOedCiPdl1z/I0cWzR2hAXNclhPgzCCEA9oo7W1ub2eympmmFQuHg4ODu7i41WDjTseJEyCSR/6KU8jzPti3LskzTHI1GjuPMk/51/gNFewQda3/bUAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"star rating example\"\n        title=\"star rating example\"\n        src=\"/static/3f4011f9c7d95964fedd1f91184aca2c/5a46d/star-rating-example.png\"\n        srcset=\"/static/3f4011f9c7d95964fedd1f91184aca2c/12f09/star-rating-example.png 148w,\n/static/3f4011f9c7d95964fedd1f91184aca2c/e4a3f/star-rating-example.png 295w,\n/static/3f4011f9c7d95964fedd1f91184aca2c/5a46d/star-rating-example.png 300w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>My first thoughts were wandering around star images one after another, the hell with positioning with frames or multitude of <a href=\"http://www.informit.com/articles/article.aspx?p=2041295\">Auto Layout constraints</a>. Nah. The second take led me to <a href=\"https://github.com/erndev/EDStarRating\"><code>EDStarRating</code></a>, a library that does this pretty well. But all I needed was only to show few stars in a row, all the events handling and customizations seemed a bit overkill for the simple task I was facing.</p>\n<p>Then the aha! moment came. I can just play with <a href=\"https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/\"><code>NSAttributedString</code></a>, a fancy thing that adds a lot of formatting capabilities to ordinary string or even parts of it. And there is the awesome set of icons everyone's using anyway in <a href=\"http://fortawesome.github.io/Font-Awesome/icons/\">Font Awesome</a>. So here are the steps I ended up doing:</p>\n<h2>Add Font Awesome to your project</h2>\n<p>There are multiple ways how to do that. We decided to <a href=\"http://luciancancescu.blogspot.com/2015/03/how-to-integrate-fontawesome-in-your.html\">add <code>FontAwesome.otf</code> definition file as a resource to our project</a>, because all I need is just to be able do the following:</p>\n<pre><code class=\"language-Objective-C\">[UIFont fontWithName:@\"FontAwesome\" size:18.0f];\n</code></pre>\n<p>You might prefer to choose one of the <a href=\"http://cocoapods.org/?q=font%20awesome\">available CocoaPods</a> that esentially deal with the same thing, often with additional capabilities or sugar like enumeration for all the icons.</p>\n<h2>Stargaze</h2>\n<p>The idea is to prepare the string that will contain the star icon multiple times, first few highlighted (filled), the rest greyed out or not filled. We need to find the appropriate Unicode numbers for our interesting icons, first - everything we need is <a href=\"http://fortawesome.github.io/Font-Awesome/cheatsheet/\">here</a>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 244px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0831ba482eb8b13299d59ebb3a398348/0cba8/star-rating-fa.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABYlAAAWJQFJUiTwAAABSUlEQVQoz3WR67LiIBCEff+n8h0slZBQKAkSZrhjcKmU7jkbzl7L/X5Q/Onp6endOI77/V4p1fd913XGGLdhjNFaxxhfr9f3/7DLOTPGjDHTNAkhQgjWWudc/Mnj8VjXtY14bfwWL8tyu92klJRSQoiU8nQ6CSEQMcbonJNSWmufz+cbZ+/99Xp1zqmN9pFSaq0BABFLKSmlZVnu93tKKefc3nVdf4gppQDAOR+GARE55+M4CiG6riOEeO/DRowxhJA2vPe11h0iHo9HpRRjbBgGrfUwDIyxvu//TA4A7YrGmJzz19ohBM65MUZKKYRwzk3TpJQCgF+ezbDW+m2j1volRsTD4dCqIoQopc7nM6W0ZfbeW2uNMTHGNwcrpSAiAMgNa22MsaUKIXjvSyn/NPSXeJ5nrfXlcmGMzfMMAC1nSqkt/LanT/EHSp8wU3lkzZMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Font Awesome Unicode codes\"\n        title=\"Font Awesome Unicode codes\"\n        src=\"/static/0831ba482eb8b13299d59ebb3a398348/0cba8/star-rating-fa.png\"\n        srcset=\"/static/0831ba482eb8b13299d59ebb3a398348/12f09/star-rating-fa.png 148w,\n/static/0831ba482eb8b13299d59ebb3a398348/0cba8/star-rating-fa.png 244w\"\n        sizes=\"(max-width: 244px) 100vw, 244px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>I decided to use the basic <code>fa-star</code> icon (<code>\\uf005</code>) and manipulate with the color, making the inactive gray. You might want to use <code>fa-star-o</code> instead (<code>\\uf123</code>).</p>\n<h2>Build the <code>NSAttributedString</code></h2>\n<p>Now I need to create two formattings - first that represents the highlighted stars that will be black in my case and the second for the not highlighted ones - light gray, let's say. <code>NSAttributedString</code> expects me to provide the dictionaries with the appropriate options. Here they are:</p>\n<pre><code class=\"language-Objective-C\">UIFont *fontAwesome = [UIFont fontWithName:@\"FontAwesome\" size:18.0f];\nNSDictionary *activeStarFormatting = @{\n    NSFontAttributeName : fontAwesome, \n    NSForegroundColorAttributeName : [UIColor blackColor]\n};\nNSDictionary *inactiveStarFormatting = @{\n    NSFontAttributeName : fontAwesome, \n    NSForegroundColorAttributeName : [UIColor lightGrayColor]\n};\n</code></pre>\n<p>Now, all I need is to build the actual string by iterating the appropriate number of times, first adding the highlighted stars, then filling with the inactive ones up to the expected number of stars.</p>\n<pre><code class=\"language-Objective-C\">const NSInteger filledStars = 2;\nconst NSInteger maxStars = 3;\n\nNSMutableAttributedString *attString = [NSMutableAttributedString new];\nNSInteger i = 0;\n\nfor (; i &#x3C; filledStars; ++i) {\n    [attString appendAttributedString:[[NSAttributedString alloc] \n        initWithString:@\" \\uf005 \" attributes:activeStarFormatting]];\n}\nfor (; i &#x3C; maxStars; ++i) {\n    [attString appendAttributedString:[[NSAttributedString alloc] \n        initWithString:@\" \\uf005 \" attributes:inactiveStarFormatting]];\n}\n</code></pre>\n<h2>Enjoy!</h2>\n<p>Now it's just a matter of wrapping it in a nice function:</p>\n<pre><code class=\"language-Objective-C\">+ (NSAttributedString *)starRatingWith:(NSInteger)filledStars\n                            outOfTotal:(NSInteger)totalStars {\n    UIFont *fontAwesome = [UIFont fontWithName:@\"FontAwesome\" size:18.0f];\n    NSDictionary *activeStarFormatting = @{\n            NSFontAttributeName : fontAwesome,\n            NSForegroundColorAttributeName : [UIColor blackColor]\n    };\n    NSDictionary *inactiveStarFormatting = @{\n            NSFontAttributeName : fontAwesome,\n            NSForegroundColorAttributeName : [UIColor lightGrayColor]\n    };\n\n    NSMutableAttributedString *attString = [NSMutableAttributedString new];\n\n    NSInteger i = 0;\n    for (; i &#x3C; filledStars; ++i) {\n        [attString appendAttributedString:[[NSAttributedString alloc]\n                initWithString:@\" \\uf005 \" attributes:activeStarFormatting]];\n    }\n    for (; i &#x3C; totalStars; ++i) {\n        [attString appendAttributedString:[[NSAttributedString alloc]\n                initWithString:@\" \\uf005 \" attributes:inactiveStarFormatting]];\n    }\n\n    return attString;\n}\n</code></pre>\n<p>To use it, we now just need an ordinary <code>UILabel</code>:</p>\n<pre><code class=\"language-Objective-C\">UILabel *starRating = [UILabel new];\nstarRating.attributedText = [self starRatingWith:2 outOfTotal:3];\n</code></pre>\n<p>And here is the result:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 100px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/82ec82d0cad1959eb9901f0b45f601a7/7e516/star-rating-label.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABM0lEQVQY00WQPY7CQAyF5ybU3IBjUHAGhLTcghrBHRBNSno6OpoghERBBQKkbPB4xh6PmURktWR/vupZ71nWs1HVGCMRpZSIKMaoqsysqiEEEWkDqvp8Plvxh7HWeu/rut7tdlVVEREANE1zPB4BIKUEAMwMAEVRhBCstfjGWmuI6H6/z2azbrc7nU6v1yszr1arXq83HA73+72I3G63zWazXq/P57P7BRGNc46I+v2+MWYwGCBiVVXz+dwY0+l0DoeDql4ulyzLlsvl6XRiZkT8WQaAuq6zLBuNRovFIqWkqnmej8cfk8nEv7HW5nm+3W6LoiCi/8uICADOuaZpnHMAgIgPgNfrJSJlWTrn2r8Qcev+dw5MEjgEgscnkZPA7WihZPLf+h1g9sy+daOEKEGEvwCeamuyD5mazwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"NSAttributedString-based star rating example\"\n        title=\"NSAttributedString-based star rating example\"\n        src=\"/static/82ec82d0cad1959eb9901f0b45f601a7/7e516/star-rating-label.png\"\n        srcset=\"/static/82ec82d0cad1959eb9901f0b45f601a7/7e516/star-rating-label.png 100w\"\n        sizes=\"(max-width: 100px) 100vw, 100px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Voilà!</p>","excerpt":"Recently I had a need to show the simple rating control in one of our iOS apps - the typical row of stars, few leftmost highlighted, the…","frontmatter":{"slug":null,"title":"iOS: The simplest star rating control ever","description":null,"author":"adam","tags":["iOS"],"date":"2015-08-13T00:00:00.000Z","image":null},"timeToRead":4,"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2015-08-13-ios-simplest-star-rating-control-ever.md"},"site":{"siteMetadata":{"siteUrl":"https://brightinventions.pl"}}},"pageContext":{"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2015-08-13-ios-simplest-star-rating-control-ever.md"}},"staticQueryHashes":["2189233960","3181594896"]}