{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/typescript-tips-from-kotlin-developer-const","result":{"data":{"markdownRemark":{"html":"<p>Nowadays I mostly code in <a href=\"https://kotlinlang.org/\">Kotlin programming language</a>. I got interested in it when I started working on a Java 7 codebase and quickly got fed up with the language. At <a href=\"https://brightinventions.pl\">Bright Inventions</a> we often use TypeScript for both back-end, front-end and mobile development so I thought I would share some thoughts and tips for TypeScript learned while using Kotlin. In particular this post is about constant variables.</p>\n<h2>Use <code>const</code> whenever possible</h2>\n<p><a href=\"https://hackernoon.com/5-benefits-of-immutable-objects-worth-considering-for-your-next-project-f98e7e85b6ac\">Using immutable variables</a> aids reasoning about the flow and state of a program. It helps compiler to provide more intelligent hints especially while dealing with nullable types.</p>\n<p>In Kotlin a <code>val</code> keyword denotes a variable which value does not change after initialization e.g.:</p>\n<pre><code class=\"language-kotlin\">val x: Int\nval y = 3\nx = 2\nx = 20 // Error: Val cannot be reassigned\ny = 30 // Error: Val cannot be reassigned\n</code></pre>\n<p>In <a href=\"https://www.typescriptlang.org/\">TypeScript</a> such a situation is handled with <code>const</code>:</p>\n<pre><code class=\"language-typescript\">const x: number // Error: 'const' declarations must be initialized\nconst y: number = 3\n\ny = 30 // Error: Cannot assign to 'y' because it is constant or read-only property\n</code></pre>\n<h2>Compilers love <code>const</code></h2>\n<p>The first way in which the compiler gets smarter when we use <code>const</code> are null checks. When you enable <a href=\"https://www.typescriptlang.org/docs/handbook/compiler-options.html\"><code>strictNullChecks</code></a>, which you should, both Kotlin and TypeScript compiler understand if something can or cannot be null.</p>\n<pre><code class=\"language-typescript\">const firstName: string | null = getFirstName()\nlet lastName: string | null = getLastName()\n\nif (firstName !== null &#x26;&#x26; lastName !== null) {\n    setTimeout(() => {\n        console.log(firstName.length)\n        console.log(lastName.length) // Error: Object is possibly 'null'\n    })\n}\n</code></pre>\n<p>In the first 2 lines we declare <code>firstName</code> and <code>lastName</code> as holding <code>string</code> or <code>null</code>. The variables are initialized with the helper functions <code>getFirstName</code> and <code>getLastName</code>. After we check that <code>firstName</code> and <code>lastName</code> are <strong>definitely not null</strong> we fire some async function. We can safely use <code>firstName.length</code>. However, when we use <code>lastName.length</code> the compiler complains with <code>Object is possibly 'null'</code> error. This is because it is possible that in between the null check and the <code>console.log</code> statement <em>something</em> could change the <code>lastName</code> value. We might know that this is not true just by looking at the code. The compiler however, cannot be 100% sure in all cases. Thankfully we have <code>const</code> and we can share our knowledge with the compiler.</p>\n<h2>Compilers catch bugs with <code>const</code></h2>\n<p>Because <code>const</code> and <code>val</code> can only be assigned once, compilers can prevent another class of bugs. Take a look at the code example blow. There is a bug üêõ that could easily be avoided had we used <code>const</code> instead of <code>let</code>.</p>\n<pre><code class=\"language-typescript\">let firstName: string = person.firstName\nlet lastName: string = person.lastName\n\nconst parsed = parseFormData((data: {name: string }) => {\n    let first: string | null, last: string | null\n    let parts = data.name.split(' ')\n    lastName = parts[0]\n    firstName = parts[1]\n    return { firstName: first, lastName: last }\n})\n\nif (parsed.firstName !== firstName || parsed.lastName !== lastName) { \n    // submit changes\n}\n</code></pre>\n<p>You may have spotted the bug. Chances are though, especially if you are like me, that after long hours when the coffee level in your blood drops substantially below the required level, it will take long minutes to figure out the cause. There is a very easy remedy though. With <code>firstName</code> and <code>lastName</code> declared as constant variables the compiler catches bugs for us:</p>\n<pre><code class=\"language-typescript\">lastName = parts[0] // Error: Cannot assign 'lastName' because it is a constant or a read-only property\nfirstName = parts[1] // Error: Cannot assign 'firstName' because it is a constant or a read-only property\n</code></pre>","excerpt":"Nowadays I mostly code in Kotlin programming language. I got interested in it when I started working on a Java 7 codebase and quickly got‚Ä¶","frontmatter":{"slug":null,"title":"TypeScript tips from Kotlin developer - const","description":null,"author":"piotr","tags":["TypeScript","Kotlin","const","immutability"],"date":"2018-04-10T22:00:00.000Z","image":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/100c0a289713fc0b1b8b98cabe2f94be/8a0e5/kotlin-logo.png","srcSet":"/static/100c0a289713fc0b1b8b98cabe2f94be/f2a56/kotlin-logo.png 38w,\n/static/100c0a289713fc0b1b8b98cabe2f94be/67bac/kotlin-logo.png 76w,\n/static/100c0a289713fc0b1b8b98cabe2f94be/8a0e5/kotlin-logo.png 152w","sizes":"(min-width: 152px) 152px, 100vw"},"sources":[{"srcSet":"/static/100c0a289713fc0b1b8b98cabe2f94be/0852d/kotlin-logo.webp 38w,\n/static/100c0a289713fc0b1b8b98cabe2f94be/984aa/kotlin-logo.webp 76w,\n/static/100c0a289713fc0b1b8b98cabe2f94be/da3f1/kotlin-logo.webp 152w","type":"image/webp","sizes":"(min-width: 152px) 152px, 100vw"}]},"width":152,"height":151}}}},"timeToRead":3,"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2018-04-11-typescript-tips-from-kotlin-developer-const.md"},"site":{"siteMetadata":{"siteUrl":"https://brightinventions.pl"}}},"pageContext":{"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2018-04-11-typescript-tips-from-kotlin-developer-const.md"}},"staticQueryHashes":["2189233960","3181594896"]}