{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/charts-on-android-2","result":{"data":{"markdownRemark":{"html":"<p>In the <a href=\"https://brightinventions.pl/blog/charts-on-android-1/\">previous post</a> I did show you how to make a basic setup of Android linear chart using <a href=\"https://github.com/PhilJay/MPAndroidChart\">MPAndroidChart</a> library. Now I'll show you some features I found useful.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0e647c2bed4f4a45362ac59285c75247/b051d/tuning.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.89189189189189%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABwpWycwcj/8QAGxAAAgIDAQAAAAAAAAAAAAAAAQIAIQMREjH/2gAIAQEAAQUCFQnon3FcdRtlv//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPwGVr//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/AYj/xAAbEAACAQUAAAAAAAAAAAAAAAAAERABITFBUf/aAAgBAQAGPwLhjUMqrOP/xAAbEAADAAIDAAAAAAAAAAAAAAAAAREhYTFBUf/aAAgBAQABPyHXwEVwnodKHjQqyKtFTXaIUH//2gAMAwEAAgADAAAAENwf/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERQf/aAAgBAwEBPxDRok//xAAWEQADAAAAAAAAAAAAAAAAAAABEEH/2gAIAQIBAT8QMp//xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhMVH/2gAIAQEAAT8QcnaRRJm8HJ+IevNNFAURmnVAe/XdIAfdHJwu/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tuning\"\n        title=\"tuning\"\n        src=\"/static/0e647c2bed4f4a45362ac59285c75247/1c72d/tuning.jpg\"\n        srcset=\"/static/0e647c2bed4f4a45362ac59285c75247/a80bd/tuning.jpg 148w,\n/static/0e647c2bed4f4a45362ac59285c75247/1c91a/tuning.jpg 295w,\n/static/0e647c2bed4f4a45362ac59285c75247/1c72d/tuning.jpg 590w,\n/static/0e647c2bed4f4a45362ac59285c75247/b051d/tuning.jpg 783w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Custom handling of chart tap event</h2>\n<p>The library provides default highlight values behavior on tap or drag. You may want to handle it by yourself, so get familiar with <code>OnChartValueSelectedListener</code>. It contains 2 methods:</p>\n<ul>\n<li><code>onNothingSelected</code></li>\n<li><code>onValueSelected</code></li>\n</ul>\n<p><code>onValueSelected</code> provides <code>Entry</code> object which gives you an access to the data, that is <code>FoodSearch</code> in our case. Let's  use it to something simple, like displaying some info in the toast, to see how it works:</p>\n<pre><code class=\"language-kotlin\">lineChart.isHighlightPerTapEnabled = true\n\nlineChart.setOnChartValueSelectedListener(object : OnChartValueSelectedListener {\n\n    override fun onNothingSelected() {}\n\n    override fun onValueSelected(e: Entry, h: Highlight) {\n        val yearWeek = (e.data as FoodSearch).week_id\n        Toast.makeText(baseContext, \"date: $yearWeek\", Toast.LENGTH_SHORT).show()\n    }\n})\n</code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0d4fa1db13055f602fa07aee97e9b0d5/e9131/chart_highlight.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.027027027027025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQElEQVQY0z2P0U/aUByF+6/PzUcfnMnin+CWGE22RF3UIZX2d6+oQ3otcNvSIhtoRFGgUiH5FmHx4STnvHw5n/P6OqUoXiiKZ4riiWI6XPTZtMcsv+RlJDS6R0TdLa5vXM5Tj6CraPxRRD3BZGX6Y8P65iccx8EZT26Z54bZRDMbe8xHP5mP9sifDvjb3yHtlWh1jzlLKpStxrWCJIJOhHpH0LGHuQ9Y+/JxCWx2tskfvzF+2CUf7jMcHJH2jqm2y1x1hNqNomQ1p5FQtj4nLVnkbfux8CuscNEPWPm8ugR+vXRxI81h84zTSFNqKXbqmu9GqGUBNo0wUZNWJ+YiO0e9vWsrJFGoRFGxHld3hg/r/5VPrGY/FH4Y4bAhuNZfaFVin99ZjbB9TRDXaWQh1bT6DtRtWcS3HuHAsLqxBP4DiqxOSVwayG0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"highlight chart\"\n        title=\"highlight chart\"\n        src=\"/static/0d4fa1db13055f602fa07aee97e9b0d5/fcda8/chart_highlight.png\"\n        srcset=\"/static/0d4fa1db13055f602fa07aee97e9b0d5/12f09/chart_highlight.png 148w,\n/static/0d4fa1db13055f602fa07aee97e9b0d5/e4a3f/chart_highlight.png 295w,\n/static/0d4fa1db13055f602fa07aee97e9b0d5/fcda8/chart_highlight.png 590w,\n/static/0d4fa1db13055f602fa07aee97e9b0d5/e9131/chart_highlight.png 614w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>If you want to display some view over selected Entry you may take advantage of the <code>Highlight</code> object in the <code>onValueSelected</code> method and get Entry's coordinates on the screen by accsessing <code>xPx</code> and <code>yPx</code>properties and set them to the view.</p>\n<h2>Live Data</h2>\n<blockquote>\n<p>MPAndroidChart does not officially support realtime data, <strong>*however</strong> (...)*</p>\n</blockquote>\n<p>As long as we keep reference to the specific <code>DataSet</code> object, we are able to add and remove entries dynamically. It might be a result of syncing data from the internet or partial progress some asynchronous task - doesn't matter. Let's add a random entry on the button click.</p>\n<pre><code class=\"language-kotlin\">val rand = Random()\nbananaDataSet.addEntry(Entry(bananaDataSet.entryCount.toFloat(), rand.nextFloat() * 100))\nyogurtDataSet.addEntry(Entry(yogurtDataSet.entryCount.toFloat(), rand.nextFloat() * 100))\n</code></pre>\n<p>When modifying data set, BOTH <code>LineData</code> object and the chart need to be notified about it. To do so, invoke proper method on them, then simply invalidate the chart like you would with any other view element.</p>\n<pre><code class=\"language-kotlin\">lineChart.data.notifyDataChanged()\nlineChart.notifyDataSetChanged()\nlineChart.invalidate()\n</code></pre>\n<p>I recommend you to check out other ways of updating chart data described in the <a href=\"https://github.com/PhilJay/MPAndroidChart/wiki/Dynamic-&#x26;-Realtime-Data\">docs</a>.</p>\n<h2>Viewport</h2>\n<p>Let's say you want to put readability aside, remove labels and axes with all that white spaces and make a pure chart view fill the screen. Labels/ axis configuration is obvious, just disable them:</p>\n<pre><code class=\"language-kotlin\">lineChart.axisLeft.isEnabled = false\nlineChart.axisRight.isEnabled = false\nlineChart.xAxis.isEnabled = false\nlineChart.description.isEnabled = false\nlineChart.legend.isEnabled = false\n</code></pre>\n<p>Unfortunately, it does not make the job done. As you can see below there are still space between the chart and the parent view left.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/80670866e702dbb92719b723bb8150dd/9128f/chart_viewport_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.62162162162162%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA60lEQVQY03XOz0vCYADG8d2q//8ahHWopCyiYEXMMt8fMye5sXLvNpmr6XaQoCkdMr5BCXXp8OF7e3ist+Ur77Xgc+nwsbhmtbBZ1WfM5zZ5aZPOBH4uUKnmxmjaRtOJNe5Y0880OpHcT32OWrtYloUVFh6PkxZFdclz5ZBXAi9TXD1JBpM+3cSlE/dwIheZuojktyp1cUaKwSxge3+PrY1NrF4W0xwqjn2Xk0BzEUpOA8l5KLk1graRiESiUoleU390zR3D8oHGYePnYTX2GBUhURkTzQxJZUjXkrW4/F80HVHULzQPdr4HvwBbngsgC40kSgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"default viewport\"\n        title=\"default viewport\"\n        src=\"/static/80670866e702dbb92719b723bb8150dd/fcda8/chart_viewport_1.png\"\n        srcset=\"/static/80670866e702dbb92719b723bb8150dd/12f09/chart_viewport_1.png 148w,\n/static/80670866e702dbb92719b723bb8150dd/e4a3f/chart_viewport_1.png 295w,\n/static/80670866e702dbb92719b723bb8150dd/fcda8/chart_viewport_1.png 590w,\n/static/80670866e702dbb92719b723bb8150dd/9128f/chart_viewport_1.png 603w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>How to disable the chart padding? The library provides us a simple way to modify chart's <code>Viewport</code>. In this case call method <code>setViewPortOffsets(0f,0f,0f,0f)</code> on the chart object. It sets chart's offset (padding) to 0. Just remember all viewport modifications have to be called <strong>after</strong> data is set up.</p>\n<h5>BUT...!</h5>\n<p>It's a solution you need to be cautious about. What does the documentation say about using this approach?</p>\n<blockquote>\n<p>USE THIS ONLY WHEN YOU KNOW WHAT YOU ARE DOING.</p>\n</blockquote>\n<p>Why? During a short adventure with chart's viewport I came across one problematic issue. Offset seemed to be recalculated independently and every other view besides the chart itself didn't know about the change. This may cause some render problems, for example like this:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d708d0b4c54a45bff4558ed06aef0d75/6114d/chart_viewport_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABw0lEQVQoz32QXWsTQRSGF5qraooham8M9soLQci/FrxRLPUP2GRn1MRSKmrMZ4kQyadmv+bsxkdmNmk3KC68nJ0z73nOmeMZIxhjkIKMpBjZYEQQkxBFAcbEiMg2n7m7JImx37dOh3q9TrlcxnMQMc6QGzPErJF4hERXSPgBs1ZI+B6JLpG4iyRT1zhJMgccjoZUq1U8z8OzHZMkRewEyQyJviCBIg3OSYMmqf0PVR4D/yYvYRsTDgBhOBjy8MH9HCjxgHh95Qw5oOGKJdS3CvT+OdQObtZvQS4YXZ7yqHo3BzpA2HCG/QJ1Ay7GYt6ugrRF/9MLnj19wuHhHbziBHuFNoa7WFBherP2QdoMOqecnNQ4OCjtgOq/ENnu0TW2wK0SB2wx6p5RqZS3OywY/q1biAny19gmmVXgQ9Zi/PUlx9WjHLiJNL8jzWansCCXU+7eikiRhRasiH4ppjOfyapNs/mc2nElB07nism0yXyhmC8Vy6Xi50qxWikWS8VsoRlPGlz/UPQnms/fFRcjhe4r/J7Pu+s2r85fU3tco1Qq4Sl3obDRmv4+a5o95dToavyedjlt1fP5OG7xRp9xdC9/8h9HZ/VsdM1WqAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"viewport issue\"\n        title=\"viewport issue\"\n        src=\"/static/d708d0b4c54a45bff4558ed06aef0d75/fcda8/chart_viewport_2.png\"\n        srcset=\"/static/d708d0b4c54a45bff4558ed06aef0d75/12f09/chart_viewport_2.png 148w,\n/static/d708d0b4c54a45bff4558ed06aef0d75/e4a3f/chart_viewport_2.png 295w,\n/static/d708d0b4c54a45bff4558ed06aef0d75/fcda8/chart_viewport_2.png 590w,\n/static/d708d0b4c54a45bff4558ed06aef0d75/6114d/chart_viewport_2.png 623w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span> </p>\n<p>Displayed value is the mentioned \"other view\" that does not know about the offset change, so edge values are cut. Keep this in mind modifying viewport! For more viewport modifications check out the project's <a href=\"https://github.com/PhilJay/MPAndroidChart/wiki/Modifying-the-Viewport\">wiki page</a>.</p>\n<h2>Drawable Values</h2>\n<p>If you need to mark any value in some special way you may define <code>Entry</code>'s <code>icon</code> property. It's an instance of a <code>Drawable</code> class, so it's very easy to layout the icon in a resource file and then apply  it to the Entry. In our example let's mark with a red dot each value that differs from the previous one more than <em>15</em> to see every bigger steeper slope on the chart.</p>\n<p>Define any drawable resource, for example 20x20 red oval:</p>\n<pre><code class=\"language-xml\">&#x3C;shape xmlns:android=\"http://schemas.android.com/apk/res/android\" android:shape=\"oval\">\n    &#x3C;size android:width=\"20dp\" android:height=\"20dp\" />\n    &#x3C;solid android:color=\"#ff0000\" />\n&#x3C;/shape>\n</code></pre>\n<p>Now add some code to <code>getEntriesFromCSV</code> method. Before adding a new <code>Entry</code> to an array, add the Drawable as the icon's property if the point fulfills the condition:</p>\n<pre><code class=\"language-kotlin\">data?.mapIndexed { index, foodSearch ->\n    val entry = Entry(index.toFloat(), foodSearch.value.toFloat(), foodSearch)\n    val steeperSlope = 15\n\n    if (index != 0 &#x26;&#x26; (foodSearch.value > data?.get(index - 1)!!.value + steeperSlope ||\n                    foodSearch.value &#x3C; data?.get(index - 1)!!.value - steeperSlope)) {\n\n        val icon = resources.getDrawable(R.drawable.ic_balloon, null)\n        entry.icon = icon\n    }\n\n    entries.add(entry)\n}\n</code></pre>\n<p>In order to see the icons, set the <em>drawIcons</em> flag to <code>true</code> on each <code>DataSet</code> object:</p>\n<pre><code class=\"language-kotlin\">bananaDataSet.setDrawIcons(true)\nyogurtDataSet.setDrawIcons(true)\n</code></pre>\n<p>Thank's to that icons are displayed over specified entries:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/99a7aa96e230f3f0f91ba4a2549b9c67/9128f/chart_icons_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACGUlEQVQoz2XSTU8TURTG8dEFwY1+CbdKWLkyoG7ckJi48DPgW4wLCSTElUs/B8SEiq1C1BgDaTvtFEpMoIgUaCklldBi6dy36bR/05lWrZ3kl3Pmntwn9ybXujkR4c79RUZvz3N9fI6R8U7tN3Ir1Lc2Ps+1sTlu3H3D2L0lro7OYFkW1vOXNtOvHJ7NJnk0HefxTKLPk5kEky9WeDi1OjDrmJxa5ensOhMPXnPxgoXlNxXNpoK2AUxYe1oa8Gh6gpYvg75v3ja0fEXn+/xpmeHhS1gNVyCERGuNUv9pg9IGpdTgrMt1RRAYjUbDKwshkFJjjI/WBq1VEK6Nh9nOYRoCZbxwZpoDpAwDY7H3/wSKKkYeoj2BbrbRxseoKl7uLaaeR2mBVnW0qnWdYmQxqELqIHB56QOXL1/BUlJizh18z8b7/hGzm8V4e5hGGuOt4Usb383gC4eWsLsStEQ86L3GBrBPLLrQO6HL+ZlDo+HgnXylffqFluxudFNUayk2S0nyx3bQF3+m2CmnOaikOammKByvUvq1RWRx4e+VswcO6f0k30pptsppciWbQsVm+8gmuWcT37VJ5G3i+bD2dNZXduJsnuSIvIswNDSEJaVko5Alc5AJOPsZnIO1P9YLHZmgZgu9/1C2uIazl2K39oPIYiQ8YdPT1GqHFMtHFCsVjitlzuo1pBYI5eJ2yC41qO7Ww2cTC5/Nb4HY4LyYcv8XAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"icons over values\"\n        title=\"icons over values\"\n        src=\"/static/99a7aa96e230f3f0f91ba4a2549b9c67/fcda8/chart_icons_1.png\"\n        srcset=\"/static/99a7aa96e230f3f0f91ba4a2549b9c67/12f09/chart_icons_1.png 148w,\n/static/99a7aa96e230f3f0f91ba4a2549b9c67/e4a3f/chart_icons_1.png 295w,\n/static/99a7aa96e230f3f0f91ba4a2549b9c67/fcda8/chart_icons_1.png 590w,\n/static/99a7aa96e230f3f0f91ba4a2549b9c67/9128f/chart_icons_1.png 603w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","excerpt":"In the previous post I did show you how to make a basic setup of Android linear chart using MPAndroidChart library. Now I'll show you some…","frontmatter":{"slug":null,"title":"Adding features to your chart on Android","description":null,"author":"radek","tags":["android","chart","live data","dynamic data"],"date":"2018-03-04T23:00:00.000Z","image":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/0e647c2bed4f4a45362ac59285c75247/37c01/tuning.jpg","srcSet":"/static/0e647c2bed4f4a45362ac59285c75247/0e33b/tuning.jpg 196w,\n/static/0e647c2bed4f4a45362ac59285c75247/799a6/tuning.jpg 392w,\n/static/0e647c2bed4f4a45362ac59285c75247/37c01/tuning.jpg 783w","sizes":"(min-width: 783px) 783px, 100vw"},"sources":[{"srcSet":"/static/0e647c2bed4f4a45362ac59285c75247/0782c/tuning.webp 196w,\n/static/0e647c2bed4f4a45362ac59285c75247/20953/tuning.webp 392w,\n/static/0e647c2bed4f4a45362ac59285c75247/461b0/tuning.webp 783w","type":"image/webp","sizes":"(min-width: 783px) 783px, 100vw"}]},"width":783,"height":522}}}},"timeToRead":5,"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2018-03-05-charts-on-android-2.md"},"site":{"siteMetadata":{"siteUrl":"https://brightinventions.pl"}}},"pageContext":{"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2018-03-05-charts-on-android-2.md"}},"staticQueryHashes":["2189233960","3181594896"]}