{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/swift-facade-pattern","result":{"data":{"markdownRemark":{"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/97bae9d7172be9145e0f1889b0249698/eea4a/facade.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.89189189189189%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAGdkqajBIv/xAAaEAABBQEAAAAAAAAAAAAAAAAAAQMREiIC/9oACAEBAAEFAkcx3potLdlJP//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AYj/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFX/8QAGhAAAgIDAAAAAAAAAAAAAAAAAREQMQACEv/aAAgBAQAGPwLkahZcUi5//8QAGhAAAwADAQAAAAAAAAAAAAAAAAERITFRQf/aAAgBAQABPyHWBt9ITKnWNZGlPIqIVUt5P//aAAwDAQACAAMAAAAQZM//xAAWEQEBAQAAAAAAAAAAAAAAAAARARD/2gAIAQMBAT8QFcf/xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8QjD//xAAcEAEAAgMAAwAAAAAAAAAAAAABABEhMUFRcaH/2gAIAQEAAT8QpTFLGwcWO5U3Fl+vkZS3CYGRTZXiNAwvUW8Xyf/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"facade image\"\n        title=\"facade image\"\n        src=\"/static/97bae9d7172be9145e0f1889b0249698/1c72d/facade.jpg\"\n        srcset=\"/static/97bae9d7172be9145e0f1889b0249698/a80bd/facade.jpg 148w,\n/static/97bae9d7172be9145e0f1889b0249698/1c91a/facade.jpg 295w,\n/static/97bae9d7172be9145e0f1889b0249698/1c72d/facade.jpg 590w,\n/static/97bae9d7172be9145e0f1889b0249698/a8a14/facade.jpg 885w,\n/static/97bae9d7172be9145e0f1889b0249698/fbd2c/facade.jpg 1180w,\n/static/97bae9d7172be9145e0f1889b0249698/eea4a/facade.jpg 1280w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>About the pattern</h2>\n<p>Facade pattern is one of the Structural Patterns. The main aim of it is to hide the complexity of a system, class or logic and provide all functionalities behind a simple interface.\nCommonly, Facade is implemented in a way that one class is related to other classes which represents a system logic. Please take a look at the diagram:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 582px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a39b93600ed9ea344a5302a3de8e5f13/7c1cd/diagram.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.94594594594595%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJUlEQVQoz2VSa4+CQAz0//8y78uJEIEAlxgSAi6C8hZQ5zI1uwFp0hSmr2m3u9frBa3v93ulz+dzhc/zvIlZ5jN+twSmacLj8cA4jmKLooDn+bAOFg6/FlSeYxw/fq26qdZVwaqq0Pc9hmEQq5RCmmY4Hm3EcYyLUoLrmLquxS6Z7pZ0u67bjEht21bYzPNkfBRORJyyGZnCjsB6LxQ20kV0Ihs1TYOmbUxjYcjAqqqRpSnO5zOy7GKYklmSJIjCCH9RJHHEmZwrBfd0guM4shaObgqSWeD7sG0bQRDJjsiCOAvt9z9wHBdleTOPV1yvCMMIruuhKErJMQXJpO1aAfmtnbTc0e1+F6uZk2Hffx6OGNnRbx5FFv11j997XP6vbvfrDv8BcE6594vGIesAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"diagram\"\n        title=\"diagram\"\n        src=\"/static/a39b93600ed9ea344a5302a3de8e5f13/7c1cd/diagram.png\"\n        srcset=\"/static/a39b93600ed9ea344a5302a3de8e5f13/12f09/diagram.png 148w,\n/static/a39b93600ed9ea344a5302a3de8e5f13/e4a3f/diagram.png 295w,\n/static/a39b93600ed9ea344a5302a3de8e5f13/7c1cd/diagram.png 582w\"\n        sizes=\"(max-width: 582px) 100vw, 582px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>As you can see, there is one class called <code>Facade</code> which separates the logic from <code>LogicA</code>, <code>LogicB</code>, <code>LogicC</code> classes. As a result our client only call the <code>Facade</code> class in order to execute some methods that are implemented in other classes.</p>\n<h2>Implementation</h2>\n<p>Let's imagine a simple scenario. You have already created a great app called <code>Super-Photo</code>. One of the core features of your app is saving/converting images with <code>JPEG</code> or <code>PNG</code> extension. In order to do this you want to save <code>UIImage</code> representation in two ways. One is saving it as a <code>PNG</code> type, the second is saving it as a <code>JPEG</code> file type.</p>\n<p>Fistly, in order to handle our image types and possible errors in our code - it will be nice to have two enums that will make our code cleaner and more readable.</p>\n<pre><code class=\"language-swift\">enum ImageSaverError: Error {\n    case couldNotCreateDestinationPath\n    case couldNotCreateJPEGDataFromImage\n    case couldNotCreatePNGDataFromImage\n    case couldNotSaveImageInDestinationPath\n}\n\nenum ImageType {\n    case png\n    case jpeg(compressionQuality: CGFloat)\n}\n</code></pre>\n<p>On the next step you will need to create a class that will handle a data providing for each photo extension:</p>\n<pre><code class=\"language-swift\">class ImageDataProvider {\n    func data(from image: UIImage, type: ImageType) throws -> Data {\n        switch type {\n        case .jpeg(let compressionQuality):\n            return try jpegData(from: image, compressionQuality: compressionQuality)\n        case .png:\n            return try pngData(from: image)\n        }\n    }\n\n    private func pngData(from image: UIImage) throws -> Data {\n        guard let imageData = UIImagePNGRepresentation(image) else { throw ImageSaverError.couldNotCreateJPEGDataFromImage }\n        return imageData\n    }\n\n    private func jpegData(from image: UIImage, compressionQuality: CGFloat) throws -> Data {\n        guard let imageData = UIImageJPEGRepresentation(image, compressionQuality) else { throw ImageSaverError.couldNotCreatePNGDataFromImage }\n        return imageData\n    }\n}\n</code></pre>\n<p>As you've noticed, our <code>ImageDataProvider</code> takes <code>image</code> and <code>type</code> parameters and creates the image data with proper extension <code>JPEG</code> or <code>PNG</code>.</p>\n<p>The last step is to create class which is needed to save <code>UIImage</code>. So let's name it a <code>PathProvider</code>. </p>\n<pre><code class=\"language-swift\">class PathProvider {\n    func createDestinationPath(fileName: String) throws -> URL {\n        guard let path = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).first else {\n            throw ImageSaverError.couldNotCreateDestinationPath\n        }\n        let destinationPath = path.appendingPathComponent(\"\\(fileName)\")\n        return destinationPath\n    }\n}\n</code></pre>\n<p>Ok, so at the moment we have two classes with some logic inside. Now it's time to create a facade for it!</p>\n<p><img src=\"../../../static/images/swift-facade-pattern/do_this.gif\" alt=\"let&#x27;s do this\"></p>\n<p>Create a class called <code>ImageSaverFacade</code> :</p>\n<pre><code class=\"language-swift\">class ImageSaverFacade {\n    private let pathProvider = PathProvider()\n    private let dataProvider = ImageDataProvider()\n\n    func save(image: UIImage, type: ImageType, fileName: String, overwrite: Bool) throws {\n        let destinationURL = try pathProvider.createDestinationPath(fileName: fileName)\n        let imageData = try dataProvider.data(from: image, type: type)\n        let writingOptions: Data.WritingOptions = overwrite ? (.atomic) : (.withoutOverwriting)\n        try imageData.write(to: destinationURL, options: writingOptions)\n    }\n}\n</code></pre>\n<p>Our <code>ImageSaverFacade</code> class has two private objects of <code>PathProvider</code> and <code>ImageDataProvider</code> class. Because the client doesn't need to know anything about logic inside, the only thing which <code>ImageSaverFacade</code> exposes to a public is one method:</p>\n<ul>\n<li><code>func save(image: UIImage, type: ImageType, fileName: String, overwrite: Bool) throws</code></li>\n</ul>\n<p>This method is the only thing that our client should care about.</p>\n<p>Now let's move on to the facade usage part:</p>\n<pre><code class=\"language-swift\">let imageSaver = ImageSaverFacade()\nlet image = UIImage(named: \"my_image\")!\ndo {\n    try imageSaver.save(image: image, type: .png, fileName: \"my_file_name\", overwrite: true)\n} catch  {\n    //handle Error\n}\n// or\ndo {\n    try imageSaver.save(image: image, type: .jpeg(compressionQuality: 1.0), fileName: \"my_file_name\", overwrite: false)\n} catch  {\n    //handle Error\n}\n</code></pre>\n<h2>Conclusion</h2>\n<p>Please notice that our facade covers logic associated with <code>Data</code> providing and creating a valid <code>URL</code> for file destination. And because of that, it is super easy to save <code>UIImage</code> as <code>PNG</code> or <code>JPEG</code> using our <code>ImageSaverFacade</code>. Only thing to do is to pass the correct parameters to facade method.</p>\n<p>Facade design pattern can be used in many cases. Facade creates for you a simple gateway to a complicated system. By using it you will definitely make your code simpler to understand and read.</p>","excerpt":"About the pattern Facade pattern is one of the Structural Patterns. The main aim of it is to hide the complexity of a system, class or logic…","frontmatter":{"slug":null,"title":"Design Patterns with Swift: Facade pattern","description":null,"author":"kwysocki","tags":["iOS","swift","design patterns","facade pattern"],"date":"2017-11-15T23:00:00.000Z","image":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/97bae9d7172be9145e0f1889b0249698/f3dc5/facade.jpg","srcSet":"/static/97bae9d7172be9145e0f1889b0249698/f6fcd/facade.jpg 320w,\n/static/97bae9d7172be9145e0f1889b0249698/e70fc/facade.jpg 640w,\n/static/97bae9d7172be9145e0f1889b0249698/f3dc5/facade.jpg 1280w","sizes":"(min-width: 1280px) 1280px, 100vw"},"sources":[{"srcSet":"/static/97bae9d7172be9145e0f1889b0249698/dde70/facade.webp 320w,\n/static/97bae9d7172be9145e0f1889b0249698/62859/facade.webp 640w,\n/static/97bae9d7172be9145e0f1889b0249698/f121e/facade.webp 1280w","type":"image/webp","sizes":"(min-width: 1280px) 1280px, 100vw"}]},"width":1280,"height":853}}}},"timeToRead":4,"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2017-11-16-swift-facade-pattern.md"},"site":{"siteMetadata":{"siteUrl":"https://brightinventions.pl"}}},"pageContext":{"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2017-11-16-swift-facade-pattern.md"}},"staticQueryHashes":["2189233960","3181594896"]}