{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/google-play-services-is-no-longer-a-monolith","result":{"data":{"markdownRemark":{"html":"<p>Nowadays it's getting harder and harder to build a meaningful app and not rely on <a href=\"https://developer.android.com/google/play-services/.html\">Google Play Services</a> to aid us in some commonly required features such as <a href=\"http://developer.android.com/google/play-services/maps.html\">maps</a>, better <a href=\"https://developer.android.com/google/play-services/location.html\">location provider</a>, <a href=\"http://developer.android.com/training/location/geofencing.html\">geo fencing</a> and so much more. Unfortunately up until now the library shipped as a giant monolith ripping us from <a href=\"http://jakewharton.com/play-services-is-a-monolith/\">one third of dex method limit</a>. For curious reader here's are method counts in couple of versions:</p>\n<table>\n<thead>\n<tr>\n<th align=\"right\">Version</th>\n<th align=\"right\">Method Count</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"right\">3.2.65</td>\n<td align=\"right\">6330</td>\n</tr>\n<tr>\n<td align=\"right\">4.4.52</td>\n<td align=\"right\">16933</td>\n</tr>\n<tr>\n<td align=\"right\">5.0.89</td>\n<td align=\"right\">20312</td>\n</tr>\n<tr>\n<td align=\"right\">6.1.71</td>\n<td align=\"right\">23641</td>\n</tr>\n</tbody>\n</table>\n<p>and <a href=\"https://gist.github.com/miensol/c6ac03fa4f6f52441992\">a full breakdown</a>.</p>\n<h2>Google Play Services 6.5 granular dependency management</h2>\n<p>Today Google has made the awaited, more than usual, version of their <a href=\"https://developer.android.com/google/play-services/.html\">SDK available</a>. With the update apart from new features you can finally depend only on a subset of enormous API. Here's a table from documentation along with <a href=\"https://github.com/mihaip/dex-method-counts\">dex method counts</a>:</p>\n<table>\n<thead>\n<tr>\n<th>API Name</th>\n<th align=\"center\">Gradle depdenency</th>\n<th align=\"right\">Dex method count</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Google Play Services</td>\n<td align=\"center\">com.google.android.gms:play-services:6.5.87</td>\n<td align=\"right\">24525</td>\n</tr>\n<tr>\n<td>Google+</td>\n<td align=\"center\">com.google.android.gms:play-services-plus:6.5.87</td>\n<td align=\"right\">1525</td>\n</tr>\n<tr>\n<td>Google Account Login</td>\n<td align=\"center\">com.google.android.gms:play-services-identity:6.5.87</td>\n<td align=\"right\">181</td>\n</tr>\n<tr>\n<td>Google Activity Recognition</td>\n<td align=\"center\">com.google.android.gms:play-services-location:6.5.87</td>\n<td align=\"right\">857</td>\n</tr>\n<tr>\n<td>Google App Indexing</td>\n<td align=\"center\">com.google.android.gms:play-services-appindexing:6.5.87</td>\n<td align=\"right\">482</td>\n</tr>\n<tr>\n<td>Google Cast</td>\n<td align=\"center\">com.google.android.gms:play-services-cast:6.5.87</td>\n<td align=\"right\">976</td>\n</tr>\n<tr>\n<td>Google Drive</td>\n<td align=\"center\">com.google.android.gms:play-services-drive:6.5.87</td>\n<td align=\"right\">2328</td>\n</tr>\n<tr>\n<td>Google Fit</td>\n<td align=\"center\">com.google.android.gms:play-services-fitness:6.5.87</td>\n<td align=\"right\">1895</td>\n</tr>\n<tr>\n<td>Google Maps</td>\n<td align=\"center\">com.google.android.gms:play-services-maps:6.5.87</td>\n<td align=\"right\">2568</td>\n</tr>\n<tr>\n<td>Google Mobile Ads</td>\n<td align=\"center\">com.google.android.gms:play-services-ads:6.5.87</td>\n<td align=\"right\">3278</td>\n</tr>\n<tr>\n<td>Google Panorama Viewer</td>\n<td align=\"center\">com.google.android.gms:play-services-panorama:6.5.87</td>\n<td align=\"right\">94</td>\n</tr>\n<tr>\n<td>Google Play Game services</td>\n<td align=\"center\">com.google.android.gms:play-services-games:6.5.87</td>\n<td align=\"right\">5046</td>\n</tr>\n<tr>\n<td>Google Wallet</td>\n<td align=\"center\">com.google.android.gms:play-services-wallet:6.5.87</td>\n<td align=\"right\">1116</td>\n</tr>\n<tr>\n<td>Android Wear</td>\n<td align=\"center\">com.google.android.gms:play-services-wearable:6.5.87</td>\n<td align=\"right\">1187</td>\n</tr>\n<tr>\n<td>Google Actions<br /> Google Analytics <br /> Google Cloud Messaging</td>\n<td align=\"center\">com.google.android.gms:play-services-base:6.5.87</td>\n<td align=\"right\">5212</td>\n</tr>\n</tbody>\n</table>\n<h2>A small change to improve build time</h2>\n<p>For me the biggest win is that in one of the apps we are actively developing granular dependency declaration means with a simple change from</p>\n<pre><code class=\"language-groovy\">compile 'com.google.android.gms:play-services:6.1.71'\n</code></pre>\n<p>to</p>\n<pre><code class=\"language-groovy\">compile 'com.google.android.gms:play-services-maps:6.5.87'\ncompile 'com.google.android.gms:play-services-location:6.5.87'\ncompile 'com.google.android.gms:play-services-base:6.5.87'\n</code></pre>\n<p> I no longer have to run <a href=\"http://proguard.sourceforge.net/\">Proguard</a> during development. No wonder my build time just improved by 15 seconds.</p>\n<p><em>This article is cross-posted with <a href=\"http://miensol.pl\">my personal blog</a></em></p>","excerpt":"Nowadays it's getting harder and harder to build a meaningful app and not rely on Google Play Services to aid us in some commonly requiredâ€¦","frontmatter":{"slug":null,"title":"Google Play Services is no longer a giant monolith","description":null,"author":"piotr","tags":["android"],"date":"2014-12-09T10:00:00.000Z","image":null},"timeToRead":3,"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2014-12-09-google-play-services-is-no-longer-a-monolith.md"},"site":{"siteMetadata":{"siteUrl":"https://brightinventions.pl"}}},"pageContext":{"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2014-12-09-google-play-services-is-no-longer-a-monolith.md"}},"staticQueryHashes":["2189233960","3181594896"]}