{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/purelayout-vs-anchors","result":{"data":{"markdownRemark":{"html":"<p>Last week I've made basic comparison between two libraries that will help you layout your interfaces - PureLayout and SnapKit. You can find this comparison <a href=\"https://eliaszsawicki.com/purelayout-vs-snapkit/\">here</a>. Today I'd lake to take the same examples and see how they work with <code>NSLayoutAnchor</code>. <code>NSLayoutAnchor</code> is available to us since iOS 9 and provides us with a new way of creating your constraints. If you do not like creating <code>NSLayoutConstraints</code> using it's initializers or visual format, and do not want any external dependencies for your layout, then <code>NSLayoutAnchor</code> is for you!</p>\n<p>Note before we start:</p>\n<ul>\n<li>We need to set <code>translatesAutoresizingMaskIntoConstraints</code> to <code>false</code> for each view we want to add constraints to.</li>\n<li>Each constraint that we create the \"anchor\" way has to be activated. That's why we use <code>.isActive = true</code>.</li>\n</ul>\n<h2>Simple positioning</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 375px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/81d3fa0b39da32cdfe4e83f6c041dd38/5ff7e/simple-positioning.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.37837837837837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAABYlAAAWJQFJUiTwAAABeklEQVQoz6WSTUsCQRiA9+/WLZbwA8TVg2G3zmUfU6gQQodOQp1CSNKiYypBGmxtGLoX2XXeJ2bXoo+FjF4ehmFmnnc+3rEeh8Nn1x17HloThqaNwnXdXq83Go1EJB7R6FBCQWazWaPRcF3XmsNi8muIiNb6w5RPq0QkCAIRsbi/p9Ph5trQuWLQT0gUmT7+Lbd9+nPm8biFUqytkcmQzZrO7m6c/Js5ZFimnCKVIlWlGhJGcq1mzELBkMlwdJQo77G3znqRooNjY3fp/i7HZkCwxVaOXIFCkWKadJNmJFer5iz5PI5jOkol7nzCiY3t4OTIpUkPGETy8bHRNjYM+Tz1eqLs49eolShtsnnBxeLB9GSqnzz9/GJ48vTrRGt+Igbx9HiqfTRxCS2WDfn0IRYfyTo/k8q2HB6I2n9HkciBYl+JOpSdHbrdSK5UWF3Ftk2Nl8G2WVnh9DSS7+5otWi3ubxcinbbrH944E93Tggr8W1/JS7lv3Z+A3SgWMW3z2OsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Simple positioning\"\n        title=\"Simple positioning\"\n        src=\"/static/81d3fa0b39da32cdfe4e83f6c041dd38/5ff7e/simple-positioning.png\"\n        srcset=\"/static/81d3fa0b39da32cdfe4e83f6c041dd38/12f09/simple-positioning.png 148w,\n/static/81d3fa0b39da32cdfe4e83f6c041dd38/e4a3f/simple-positioning.png 295w,\n/static/81d3fa0b39da32cdfe4e83f6c041dd38/5ff7e/simple-positioning.png 375w\"\n        sizes=\"(max-width: 375px) 100vw, 375px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<pre><code class=\"language-swift\">func pureLayout() {\n    box.autoPinEdge(toSuperviewEdge: .top, withInset: 50)\n    box.autoPinEdge(toSuperviewEdge: .left, withInset: 20)\n    box.autoSetDimensions(to: CGSize(width: 100, height: 100))\n\n    circle.autoPinEdge(.top, to: .top, of: box)\n    circle.autoPinEdge(toSuperviewEdge: .right, withInset: 20)\n    circle.autoSetDimensions(to: CGSize(width: 100, height: 100))\n\n    longer.autoPinEdge(toSuperviewEdge: .left, withInset: 20)\n    longer.autoPinEdge(toSuperviewEdge: .right, withInset: 20)\n    longer.autoPinEdge(.top, to: .bottom, of: box, withOffset: 40)\n    longer.autoSetDimension(.height, toSize: 40)\n}\n\nfunc anchorLayout() {\n    box.translatesAutoresizingMaskIntoConstraints = false\n    circle.translatesAutoresizingMaskIntoConstraints = false\n    longer.translatesAutoresizingMaskIntoConstraints = false\n\n    box.topAnchor.constraint(equalTo: view.topAnchor, constant: 50).isActive = true\n    box.leftAnchor.constraint(equalTo: view.leftAnchor, constant: 20).isActive = true\n    box.widthAnchor.constraint(equalToConstant: 100).isActive = true\n    box.heightAnchor.constraint(equalToConstant: 100).isActive = true\n\n    circle.topAnchor.constraint(equalTo: box.topAnchor).isActive = true\n    circle.rightAnchor.constraint(equalTo: view.rightAnchor, constant: -20).isActive = true\n    circle.widthAnchor.constraint(equalToConstant: 100).isActive = true\n    circle.heightAnchor.constraint(equalToConstant: 100).isActive = true\n\n    longer.topAnchor.constraint(equalTo: box.bottomAnchor, constant: 40).isActive = true\n    longer.leftAnchor.constraint(equalTo: view.leftAnchor, constant: 20).isActive = true\n    longer.rightAnchor.constraint(equalTo: view.rightAnchor, constant: -20).isActive = true\n    longer.heightAnchor.constraint(equalToConstant: 40).isActive = true\n}\n</code></pre>\n<h2>Inside UIScrollView</h2>\n<p><img src=\"../../../static/images/Scroll.gif\" alt=\"ScrollView positioning\"></p>\n<pre><code class=\"language-swift\">func pureLayout() {\n    scrollView.autoPinEdgesToSuperviewEdges(with: .zero)\n    scrollView.autoPinEdge(.bottom, to: .bottom, of: longer, withOffset: 20)\n\n    box.autoPinEdge(toSuperviewEdge: .top, withInset: 50)\n    box.autoPinEdge(.left, to: .left, of: self.view, withOffset: 20)\n    box.autoSetDimensions(to: CGSize(width: 100, height: 100))\n\n    circle.autoPinEdge(.top, to: .top, of: box)\n    circle.autoPinEdge(.right, to: .right, of: self.view, withOffset: -20)\n    circle.autoSetDimensions(to: CGSize(width: 100, height: 100))\n\n    longer.autoPinEdge(.left, to: .left, of: self.view, withOffset: 20)\n    longer.autoPinEdge(.right, to: .right, of: self.view, withOffset: -20)\n    longer.autoPinEdge(.top, to: .bottom, of: box, withOffset: 300)\n    longer.autoSetDimension(.height, toSize: 200)\n}\n\nfunc anchorLayout() {\n    scrollView.translatesAutoresizingMaskIntoConstraints = false\n    box.translatesAutoresizingMaskIntoConstraints = false\n    circle.translatesAutoresizingMaskIntoConstraints = false\n    longer.translatesAutoresizingMaskIntoConstraints = false\n\n    scrollView.rightAnchor.constraint(equalTo: view.rightAnchor).isActive = true\n    scrollView.topAnchor.constraint(equalTo: view.topAnchor).isActive = true\n    scrollView.leftAnchor.constraint(equalTo: view.leftAnchor).isActive = true\n    scrollView.bottomAnchor.constraint(equalTo: view.bottomAnchor).isActive = true\n    scrollView.bottomAnchor.constraint(equalTo: longer.bottomAnchor, constant: 20).isActive = true\n\n    box.topAnchor.constraint(equalTo: scrollView.topAnchor, constant: 50).isActive = true\n    box.leftAnchor.constraint(equalTo: view.leftAnchor, constant: 20).isActive = true\n    box.widthAnchor.constraint(equalToConstant: 100).isActive = true\n    box.heightAnchor.constraint(equalToConstant: 100).isActive = true\n\n    circle.topAnchor.constraint(equalTo: box.topAnchor).isActive = true\n    circle.rightAnchor.constraint(equalTo: view.rightAnchor, constant: -20).isActive = true\n    circle.widthAnchor.constraint(equalToConstant: 100).isActive = true\n    circle.heightAnchor.constraint(equalToConstant: 100).isActive = true\n\n    longer.leftAnchor.constraint(equalTo: view.leftAnchor, constant: 20).isActive = true\n    longer.rightAnchor.constraint(equalTo: view.rightAnchor, constant: -20).isActive = true\n    longer.topAnchor.constraint(equalTo: box.bottomAnchor, constant: 300).isActive = true\n    longer.heightAnchor.constraint(equalToConstant: 200).isActive = true\n}\n</code></pre>\n<h2>UIScrollView with a surprise</h2>\n<p><img src=\"../../../static/images/ScrollViewSurprise.gif\" alt=\"ScrollView positioning\"></p>\n<pre><code class=\"language-swift\">func pureLayout() {\n    scrollView.autoPinEdgesToSuperviewEdges(with: .zero)\n    scrollView.autoPinEdge(.bottom, to: .bottom, of: longer, withOffset: 20)\n\n    box.autoPinEdge(toSuperviewEdge: .top, withInset: 150)\n    box.autoAlignAxis(toSuperviewAxis: .vertical)\n    box.autoSetDimensions(to: CGSize(width: 100, height: 100))\n\n    circle.autoPinEdge(.bottom, to: .bottom, of: self.view, withOffset: -20, relation: .lessThanOrEqual)\n    circle.autoPinEdge(.bottom, to: .top, of: longer, withOffset: -20, relation: .lessThanOrEqual)\n    circle.autoAlignAxis(toSuperviewAxis: .vertical)\n    circle.autoSetDimensions(to: CGSize(width: 100, height: 100))\n\n    longer.autoPinEdge(.left, to: .left, of: self.view, withOffset: 20)\n    longer.autoPinEdge(.right, to: .right, of: self.view, withOffset: -20)\n    longer.autoPinEdge(.top, to: .bottom, of: box, withOffset: 660)\n    longer.autoSetDimension(.height, toSize: 200)\n}\n\nfunc anchorLayout() {\n    scrollView.translatesAutoresizingMaskIntoConstraints = false\n    box.translatesAutoresizingMaskIntoConstraints = false\n    circle.translatesAutoresizingMaskIntoConstraints = false\n    longer.translatesAutoresizingMaskIntoConstraints = false\n\n    scrollView.rightAnchor.constraint(equalTo: view.rightAnchor).isActive = true\n    scrollView.topAnchor.constraint(equalTo: view.topAnchor).isActive = true\n    scrollView.leftAnchor.constraint(equalTo: view.leftAnchor).isActive = true\n    scrollView.bottomAnchor.constraint(equalTo: view.bottomAnchor).isActive = true\n    scrollView.bottomAnchor.constraint(equalTo: longer.bottomAnchor, constant: 20).isActive = true\n\n    box.topAnchor.constraint(equalTo: scrollView.topAnchor, constant: 150).isActive = true\n    box.centerXAnchor.constraint(equalTo: scrollView.centerXAnchor).isActive = true\n    box.widthAnchor.constraint(equalToConstant: 100).isActive = true\n    box.heightAnchor.constraint(equalToConstant: 100).isActive = true\n\n    circle.bottomAnchor.constraint(lessThanOrEqualTo: view.bottomAnchor, constant: -20).isActive = true\n    circle.bottomAnchor.constraint(lessThanOrEqualTo: longer.topAnchor, constant: -20).isActive = true\n    circle.centerXAnchor.constraint(equalTo: scrollView.centerXAnchor).isActive = true\n    circle.widthAnchor.constraint(equalToConstant: 100).isActive = true\n    circle.heightAnchor.constraint(equalToConstant: 100).isActive = true\n\n    longer.leftAnchor.constraint(equalTo: view.leftAnchor, constant: 20).isActive = true\n    longer.rightAnchor.constraint(equalTo: view.rightAnchor, constant: -20).isActive = true\n    longer.topAnchor.constraint(equalTo: box.bottomAnchor, constant: 660).isActive = true\n    longer.heightAnchor.constraint(equalToConstant: 200).isActive = true\n}\n</code></pre>\n<h2>Updating constraint's constant</h2>\n<p><img src=\"../../../static/images/move.gif\" alt=\"ScrollView positioning\"></p>\n<pre><code class=\"language-swift\">var buttonLeftConstraint: NSLayoutConstraint?\n\nfunc pureLayout() {\n    buttonLeftConstraint = animateButton.autoPinEdge(toSuperviewEdge: .left, withInset: 20)\n    animateButton.autoPinEdge(toSuperviewEdge: .top, withInset: 50)\n    animateButton.autoSetDimensions(to: CGSize(width: 100, height: 100))\n}\n\nfunc animate() {\n    UIView.animate(withDuration: 1) {\n        let random: Double = Double(arc4random_uniform(200))\n        self.buttonLeftConstraint?.constant = random\n        self.view.layoutIfNeeded()\n    }\n}\n\n///\n\nvar buttonLeftConstraint: NSLayoutConstraint?\n\nfunc anchorLayout() {\n    animateButton.translatesAutoresizingMaskIntoConstraints = false\n    buttonLeftConstraint = animateButton.leftAnchor.constraint(lessThanOrEqualTo: view.leftAnchor, constant: 20)\n    buttonLeftConstraint?.isActive = true\n    animateButton.topAnchor.constraint(equalTo: view.topAnchor, constant: 50).isActive = true\n    animateButton.widthAnchor.constraint(equalToConstant: 100).isActive = true\n    animateButton.heightAnchor.constraint(equalToConstant: 100).isActive = true\n}\n\nfunc animate() {\n    UIView.animate(withDuration: 1) {\n        let random: CGFloat = CGFloat(arc4random_uniform(200))\n        self.buttonLeftConstraint?.constant = random\n        self.view.layoutIfNeeded()\n    }\n}\n</code></pre>\n<h2>Conclusion</h2>\n<p>I'm really glad that we have <code>NSLayoutAnchor</code>. If you want to create layout in code and avoid any external layout libraries to do this, then <code>NSLayoutAnchor</code> is a valid choice! It won't be as neat and comfy as using <code>PureLayout</code> or <code>SnapKit</code>, but for me it's much much better than visual format or basic <code>NSLayoutConstraint</code> initializer.</p>\n<p>What do you think of NSLayoutAnchor? How do you layout your views? Share your thoughts in comments!</p>\n<p><em>This article is cross-posted with my <a href=\"https://eliaszsawicki.com/\">my personal blog</a>.</em></p>","excerpt":"Last week I've made basic comparison between two libraries that will help you layout your interfaces - PureLayout and SnapKit. You can find…","frontmatter":{"slug":null,"title":"PureLayout vs NSLayoutAnchor - Great confrontation","description":null,"author":"eliasz","tags":["iOS"],"date":"2016-11-05T23:00:00.000Z","image":null},"timeToRead":6,"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2016-11-06-purelayout-vs-anchors.md"},"site":{"siteMetadata":{"siteUrl":"https://brightinventions.pl"}}},"pageContext":{"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2016-11-06-purelayout-vs-anchors.md"}},"staticQueryHashes":["2189233960","3181594896"]}