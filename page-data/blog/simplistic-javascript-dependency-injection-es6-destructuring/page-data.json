{"componentChunkName":"component---src-templates-post-template-tsx","path":"/blog/simplistic-javascript-dependency-injection-es6-destructuring","result":{"data":{"markdownRemark":{"html":"<p>Recently I got a bit tired with Angular's quirks and intricacies. To freshen up, I'm playing with framework-less JavaScript (<a href=\"http://vanilla-js.com/\">Vanilla JS</a>). I'm also getting more and more used to ES6 features. One of the outcomes by now is the idea for the <a href=\"http://www.martinfowler.com/articles/injection.html\">Dependency Injection</a> approach that stays simplistic, decoupled from any framework and still convenient to consume.</p>\n<h2>Destructuring</h2>\n<p>One of the features I like most in ES6 is <a href=\"http://www.2ality.com/2015/01/es6-destructuring.html\">destructuring</a>. It introduces a convenient syntax for getting multiple values from arrays or objects in a single step, i.e. do the following:</p>\n<pre><code class=\"language-JavaScript\">let [lat, lng] = [54.4049, 18.5763];\nconsole.log(lat); // 54.4049\nconsole.log(lng); // 18.5763\n</code></pre>\n<p>or like this:</p>\n<pre><code class=\"language-JavaScript\">let source = { first: 1, second: 2 };\nlet { first, second } = source;\nconsole.log(first, second); // 1, 2\n</code></pre>\n<p>What is even nicer, it works fine in a function definition, too, making it a great replacement for the <a href=\"http://christianheilmann.com/2008/05/23/script-configuration/\">config object pattern</a>, where instead of providing the large number of parameters, some of them potentially optional, we provide a single plain configuration object and read all the relevant options from the inside the object provided. So, with ES6 destructuring (+default parameters support), instead of this:</p>\n<pre><code class=\"language-JavaScript\">function configurable(config) {\n    var option1 = config.option1 || 123;\n    var option2 = config.option2 || 'abc';\n    // the actual code starts here...\n}\n</code></pre>\n<p>we can move all that read-config-and-apply-default-if-needed stuff directly as a parameter:</p>\n<pre><code class=\"language-JavaScript\">function configurable({ option1 = 123, option2 = 'abc' }) {\n    // the actual code from the very beginning...\n}\n</code></pre>\n<p>The code is equivalent and the change doesn't require any changes at the caller side.</p>\n<h1>Injecting</h1>\n<p>We can use destructuring to provide Angular-like experience for receiving the dependencies by a class or a function that is even more cruft-free as it's minification-safe and thus doesn't require tricks like <a href=\"https://github.com/olov/ng-annotate\">ngAnnotate</a> does. </p>\n<p>Here is how it can look from the dependencies consumer side:</p>\n<pre><code class=\"language-JavaScript\">function iHaveDependencies({ dependency1, dependency2 }) {\n    // use dependency1 &#x26; dependency2\n}\n</code></pre>\n<p>Whenever we invoke the <code>iHaveDependencies</code> function, we need to pass it a single parameter containing the object with <code>dependency1</code> and <code>dependency2</code> keys, but possibly also with others. Nothing prevents us from passing the object with all the possible dependencies there (a container).</p>\n<p>So the last thing is to ensure we have one available whenever we create the objects (or invoke the functions):</p>\n<pre><code class=\"language-JavaScript\">// possibly create it once and keep it for a long time\nlet container = { \n  dependency1: createDependency1(),\n  dependency2: createDependency2(),\n  dependency3: createDependency3(),\n  otherDependency: createOtherDependency() \n};\n\n// use our \"container\" to resolve dependencies\niHaveDependencies(container);\n</code></pre>\n<p>That's all. The destructuring mechanism will take care of populating <code>dependency1</code> and <code>dependency2</code> variables within our function seamlessly. </p>\n<p>We can easily build a dependency injection \"framework\" on top of that. The implementation would vary depending on how our application creates and accesses the objects, but the general idea will hold true. Isn't that neat?</p>\n<p>PS. Because the lack of direct ES6 support in the browsers, running that in a browser right now requires transpiling it down to ES5 beforehand. <a href=\"https://babeljs.io/\">Babel</a> works great for that.</p>","excerpt":"Recently I got a bit tired with Angular's quirks and intricacies. To freshen up, I'm playing with framework-less JavaScript (Vanilla JS). Iâ€¦","frontmatter":{"slug":null,"title":"Simplistic JavaScript dependency injection with ES6 destructuring","description":null,"author":"adam","tags":["JavaScript","ES6"],"date":"2015-08-24T00:00:00.000Z","image":null},"timeToRead":2,"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2015-08-24-simplistic-javascript-dependency-injection-es6-destructuring.md"},"site":{"siteMetadata":{"siteUrl":"https://brightinventions.pl"}}},"pageContext":{"fileAbsolutePath":"/home/runner/work/new-www/new-www/src/mdData/blog/2015-08-24-simplistic-javascript-dependency-injection-es6-destructuring.md"}},"staticQueryHashes":["2189233960","3181594896"]}