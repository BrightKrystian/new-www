<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
<title>Introducing slf4android - a simple slf4j implementation for android &#8211; Bright Inventions</title>
<meta name="description" content="Every now and then you have a bug that is hard to reproduce or only happens on certain phones or android versions. The thing that really comes handy in such case is a detailed application log. That’s why it’s so important to take time to add useful log entries in every non trivial part of the codebase. At the very minimum you’ll want to log any errors.

">
<meta name="keywords" content="android">

  

<!-- Twitter Cards -->
<meta name="twitter:title" content="Introducing slf4android - a simple slf4j implementation for android">
<meta name="twitter:description" content="Every now and then you have a bug that is hard to reproduce or only happens on certain phones or android versions. The thing that really comes handy in such case is a detailed application log. That’s why it’s so important to take time to add useful log entries in every non trivial part of the codebase. At the very minimum you’ll want to log any errors.

">
<meta name="twitter:site" content="@BrightDevs">
<meta name="twitter:creator" content="@miensol">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Introducing slf4android - a simple slf4j implementation for android">
<meta property="og:description" content="Every now and then you have a bug that is hard to reproduce or only happens on certain phones or android versions. The thing that really comes handy in such case is a detailed application log. That’s why it’s so important to take time to add useful log entries in every non trivial part of the codebase. At the very minimum you’ll want to log any errors.

">
<meta property="og:url" content="/blog/introducing-slf4android/">
<meta property="og:site_name" content="Bright Inventions">





<link rel="canonical" href="/blog/introducing-slf4android/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Bright Inventions Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Exo+2:400,700&subset=latin-ext" rel="stylesheet">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<link rel="stylesheet" href="/assets/css/post.css">


<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="/assets/js/vendor/html5shiv.min.js"></script>
	<script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<link rel="apple-touch-icon" sizes="57x57 60x60 72x72 76x76" href="/images/favicon-96x96.png">
<link rel="apple-touch-icon" sizes="114x114 120x120 144x144 152x152 180x180" href="/images/favicon-192x192.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/images/favicon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">

</head>

<body class="standard post">
    <div class="container">
        <header>
            <h1><a href="/" title="Bright Inventions">Bright Inventions</a></h1>

            <nav>
                <div id="nav-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>

                <ul id="main-nav">
                  
                  
                    <li class="item"><a href="/">About Us</a></li>
                  
                    <li class="item"><a href="/team.html">Team</a></li>
                  
                    <li class="item"><a href="/services.html">Services</a></li>
                  
                    <li class="item"><a href="/portfolio.html">Portfolio</a></li>
                  
                    <li class="item"><a href="/careers.html">Careers</a></li>
                  
                    <li class="item"><a href="/blog/">Blog</a></li>
                  
                    <li class="item"><a href="/contact.html">Contact Us</a></li>
                  
                </ul>
            </nav>
        </header>

        <section>
          <div id="main" role="main">
    <article class="post">
        <h1>Introducing slf4android - a simple slf4j implementation for android</h1>
        <hr>
        <div class="article-wrap">
            <p>Every now and then you have a bug that is hard to reproduce or only happens on certain phones or android versions. The thing that really comes handy in such case is a detailed application log. That’s why it’s so important to take time to add useful log entries in every non trivial part of the codebase. At the very minimum you’ll want to log any errors.</p>

<h2 id="logging-frameworks">Logging frameworks</h2>
<p>That’s why it’s so important to create log entries easily. The default solution that comes with Android by means of <a href="http://developer.android.com/reference/android/util/Log.html"><code>Log</code></a> is the most commonly used. However for me it’s really  the least pleasant to use:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="s">"MyTag"</span><span class="o">,</span> <span class="s">"Failed to download "</span> <span class="o">+</span> <span class="n">url</span> <span class="o">+</span>  <span class="s">"due to occurred "</span> <span class="o">+</span> <span class="n">ex</span><span class="o">);</span></code></pre></div>

<p>I really don’t like that I have to specify a tag each time I need to log something. Moreover having to concatenate strings seems tedious and error prone.</p>

<h3 id="logging-with-javautillogging">Logging with <code>java.util.logging</code></h3>
<p>Another alternative that is available by default on android is packaged inside <code>java.util.logging.*</code>. And here’s an example of how to use it:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">LOG</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">MyActivity</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
    <span class="c1">// and then</span>
    <span class="n">LOG</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">Level</span><span class="o">.</span><span class="na">FINE</span><span class="o">,</span> <span class="s">"Starting activity {0} saved instance {1}"</span><span class="o">,</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[]{</span><span class="k">this</span><span class="o">,</span> <span class="n">savedInstanceState</span><span class="o">});</span></code></pre></div>

<p>You’re able to use <a href="http://developer.android.com/reference/java/text/MessageFormat.html"><code>MessageFormatter</code></a> style to format log entries. However no variable arguments method overload makes it both harder to read and write. More importantly <strong>by default</strong> if you use above statement the message <strong>will not be printed anywhere</strong>. It’s easy to <a href="http://stackoverflow.com/questions/4561345/how-to-configure-java-util-logging-on-android">fix</a> when you know where to look for.</p>

<h3 id="powerful-logback">Powerful <code>logback</code></h3>

<p><a href="http://logback.qos.ch/">logback</a> is probably the most powerful and configurable logging framework. Among many features you can for example send an email with 50 last log entries - I’ve used it in one project, it can be a bit hard to configure but it really comes handy during testing. In order to use it on android one needs to use a ported version <a href="http://tony19.github.io/logback-android/">logback-android</a>. There is one caveat though - this library is costs about 512kB - and takes about 4200 out of <a href="https://medium.com/@rotxed/dex-skys-the-limit-no-65k-methods-is-28e6cb40cf71">dex method limit</a>.</p>

<h3 id="simple-android-loggerhttpsgithubcomnoveogroupandroid-logger">Simple <a href="https://github.com/noveogroup/android-logger">android-logger</a></h3>

<p><code>android-logger</code> is a small (&lt;50KB) library that let’s you use slf4j api to print to logcat. It ships with various configuration options that let you change the format of output messages as well as log level based on hierarchical logger names. However you won’t be able to print messages to <a href="https://github.com/noveogroup/android-logger/issues/25">an additional file</a> and you can only <a href="https://github.com/noveogroup/android-logger/issues/28">configure the logger through properties files</a>.</p>

<h2 id="slf4androidhttpsgithubcombrightslf4android"><a href="https://github.com/bright/slf4android">slf4android</a></h2>
<p>Since I wasn’t perfectly happy with above and because some design decisions made in <a href="https://github.com/noveogroup/android-logger">android-logger</a> make it not so easy to add features like logging to a file, creating custom patterns and configuring it from code I decided to create yet another logging utility.</p>

<p>It’s a tiny wrapper around <a href="http://www.slf4j.org/">slf4j api</a> baked by the <code>java.util.logging</code> logger mechanism. This means you can easily hook in any existing <code>java.util.logging.Handler</code> implementations.</p>

<p>To use this little gem you’ll need to add <a href="http://bright.github.io/maven-repo/"><code>http://bright.github.io/maven-repo/</code></a> to repository list:</p>

<div class="highlight"><pre><code class="language-groovy" data-lang="groovy"><span class="n">repositories</span> <span class="o">{</span>
    <span class="n">maven</span> <span class="o">{</span>
        <span class="n">url</span> <span class="s2">"http://bright.github.io/maven-repo/"</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></div>

<p>and then declare a dependency inside a module:</p>

<div class="highlight"><pre><code class="language-groovy" data-lang="groovy"><span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span><span class="o">(</span><span class="s1">'pl.brightinventions:slf4android:0.0.4@aar'</span><span class="o">){</span>
      <span class="n">transitive</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="o">}</span>
    <span class="c1">//other dependencies</span>
<span class="o">}</span></code></pre></div>

<p>As with any slf4j compatible implementation using slf4android looks like this:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">HomeActivity</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">LOG</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">HomeActivity</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getSimpleName</span><span class="o">());</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">LOG</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"Hello from {} saved instance state {}"</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="n">savedInstanceState</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></div>

<h3 id="logging-to-a-file">Logging to a file</h3>
<p>To print messages to a separate file just add:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">LoggerConfiguration</span><span class="o">.</span><span class="na">configuration</span><span class="o">().</span><span class="na">addHandlerToLogger</span><span class="o">(</span><span class="s">""</span><span class="o">,</span> <span class="n">LoggerConfiguration</span><span class="o">.</span><span class="na">fileLogHandler</span><span class="o">(</span><span class="k">this</span><span class="o">));</span></code></pre></div>

<p>inside your custom <code>android.app.Application</code> <code>onCreate</code> method. This will create rotated log files inside <code>context.getApplicationInfo().dataDir</code> with a name derived from <code>context.getPackageName()</code> and a default message pattern <code>%date %level [%thread] %name - %message%newline</code></p>

<h3 id="more-features">More features</h3>
<p><code>slf4android</code> let’s you register custom message patterns and configure logging level - although the api for that is still rough around the edges. It also features a simple (and not well tested) mechanism for error reporting that, when enabled, will display a <code>Dialog</code> prompting tester to notify developer through email whenever an error is encountered. You can enable it with:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">LoggerConfiguration</span><span class="o">.</span><span class="na">configuration</span><span class="o">().</span><span class="na">notifyDeveloperWithLogcatDataHandler</span><span class="o">(</span><span class="n">applicationContext</span><span class="o">,</span> <span class="s">"developer.address@domain.com"</span><span class="o">)</span></code></pre></div>

<p>and receive emails with attached logcat output which comes handy during development.</p>

<p><em>This article is cross-posted with <a href="https://miensol.pl">my personal blog</a></em></p>

            <hr />
            <footer role="contentinfo">
                <div class="article-author-bottom">
                    
  


    
        <img src="http://brightinventions.pl/assets/piotr_small.png" class="bio-photo" alt="Piotr Mionskowski bio photo">
    


<h3>Piotr Mionskowski</h3>
<p>TDD fan eager to learn new things</p>
<a href="http://miensol.pl" class="author-social" target="_blank"><i class="fa fa-fw fa-globe"></i> Personal blog</a>
<a href="mailto:piotr.mionskowski@brightinventions.pl" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-square"></i> Email</a>
<a href="http://twitter.com/miensol" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>





<a href="http://github.com/miensol" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>
<a href="http://stackoverflow.com/users/155213/miensol" class="author-social" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i> Stackoverflow</a>







                </div>
                <p class="byline"><strong>Introducing slf4android - a simple slf4j implementation for android</strong> was published on <time datetime="2014-11-01T00:00:00+01:00">November 01, 2014</time>.</p>
            </footer>
        </div><!-- /.article-wrap -->
        
    </article>
</div><!-- /#main -->


          <div class="clearfix"></div>
        </section>
</div>

<footer>
<div class="outer">
  <div class="container">
      <ul class="links">
          <li>
              <a href="https://www.facebook.com/Bright.Inventions/" target="_blank" title="Facebook">
                  <svg viewBox="0 0 96.124 96.123" width="35px" height="35px">
                      <path fill="#fff" d="M72.089,0.02L59.624,0C45.62,0,36.57,9.285,36.57,23.656v10.907H24.037c-1.083,0-1.96,0.878-1.96,1.961v15.803
                      c0,1.083,0.878,1.96,1.96,1.96h12.533v39.876c0,1.083,0.877,1.96,1.96,1.96h16.352c1.083,0,1.96-0.878,1.96-1.96V54.287h14.654
                      c1.083,0,1.96-0.877,1.96-1.96l0.006-15.803c0-0.52-0.207-1.018-0.574-1.386c-0.367-0.368-0.867-0.575-1.387-0.575H56.842v-9.246
                      c0-4.444,1.059-6.7,6.848-6.7l8.397-0.003c1.082,0,1.959-0.878,1.959-1.96V1.98C74.046,0.899,73.17,0.022,72.089,0.02z"/>
                  </svg>
              </a>
          </li>

          <li>
              <a href="https://twitter.com/BrightDevs" target="_blank" title="Twitter - @BrightDevs">
                  <svg viewBox="75 75 250 250" width="35px" height="35px">
                      <path fill="#fff" d="M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23"/>
                  </svg>
              </a>
          </li>

          <li>
              <a href="https://www.instagram.com/bright_devs/" target="_blank" title="Instagram - bright_devs">
                  <svg viewBox="0 0 510 510" width="35px" height="35px">
                      <path fill="#fff" d="M459,0H51C22.95,0,0,22.95,0,51v408c0,28.05,22.95,51,51,51h408c28.05,0,51-22.95,51-51V51C510,22.95,487.05,0,459,0z
                      M255,153c56.1,0,102,45.9,102,102c0,56.1-45.9,102-102,102c-56.1,0-102-45.9-102-102C153,198.9,198.9,153,255,153z M63.75,459
                      C56.1,459,51,453.9,51,446.25V229.5h53.55C102,237.15,102,247.35,102,255c0,84.15,68.85,153,153,153c84.15,0,153-68.85,153-153
                      c0-7.65,0-17.85-2.55-25.5H459v216.75c0,7.65-5.1,12.75-12.75,12.75H63.75z M459,114.75c0,7.65-5.1,12.75-12.75,12.75h-51
                      c-7.65,0-12.75-5.1-12.75-12.75v-51c0-7.65,5.1-12.75,12.75-12.75h51C453.9,51,459,56.1,459,63.75V114.75z"/>
                  </svg>
              </a>
          </li>

          <li>
              <a href="https://github.com/bright" target="_blank" title="GitHub - Bright">
                  <svg viewBox="0 0 438.549 438.549" width="35px" height="35px">
                      <path fill="#fff" d="M409.132,114.573c-19.608-33.596-46.205-60.194-79.798-79.8C295.736,15.166,259.057,5.365,219.271,5.365
                      c-39.781,0-76.472,9.804-110.063,29.408c-33.596,19.605-60.192,46.204-79.8,79.8C9.803,148.168,0,184.854,0,224.63
                      c0,47.78,13.94,90.745,41.827,128.906c27.884,38.164,63.906,64.572,108.063,79.227c5.14,0.954,8.945,0.283,11.419-1.996
                      c2.475-2.282,3.711-5.14,3.711-8.562c0-0.571-0.049-5.708-0.144-15.417c-0.098-9.709-0.144-18.179-0.144-25.406l-6.567,1.136
                      c-4.187,0.767-9.469,1.092-15.846,1c-6.374-0.089-12.991-0.757-19.842-1.999c-6.854-1.231-13.229-4.086-19.13-8.559
                      c-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559
                      c-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-0.951-2.568-2.098-3.711-3.429c-1.142-1.331-1.997-2.663-2.568-3.997
                      c-0.572-1.335-0.098-2.43,1.427-3.289c1.525-0.859,4.281-1.276,8.28-1.276l5.708,0.853c3.807,0.763,8.516,3.042,14.133,6.851
                      c5.614,3.806,10.229,8.754,13.846,14.842c4.38,7.806,9.657,13.754,15.846,17.847c6.184,4.093,12.419,6.136,18.699,6.136
                      c6.28,0,11.704-0.476,16.274-1.423c4.565-0.952,8.848-2.383,12.847-4.285c1.713-12.758,6.377-22.559,13.988-29.41
                      c-10.848-1.14-20.601-2.857-29.264-5.14c-8.658-2.286-17.605-5.996-26.835-11.14c-9.235-5.137-16.896-11.516-22.985-19.126
                      c-6.09-7.614-11.088-17.61-14.987-29.979c-3.901-12.374-5.852-26.648-5.852-42.826c0-23.035,7.52-42.637,22.557-58.817
                      c-7.044-17.318-6.379-36.732,1.997-58.24c5.52-1.715,13.706-0.428,24.554,3.853c10.85,4.283,18.794,7.952,23.84,10.994
                      c5.046,3.041,9.089,5.618,12.135,7.708c17.705-4.947,35.976-7.421,54.818-7.421s37.117,2.474,54.823,7.421l10.849-6.849
                      c7.419-4.57,16.18-8.758,26.262-12.565c10.088-3.805,17.802-4.853,23.134-3.138c8.562,21.509,9.325,40.922,2.279,58.24
                      c15.036,16.18,22.559,35.787,22.559,58.817c0,16.178-1.958,30.497-5.853,42.966c-3.9,12.471-8.941,22.457-15.125,29.979
                      c-6.191,7.521-13.901,13.85-23.131,18.986c-9.232,5.14-18.182,8.85-26.84,11.136c-8.662,2.286-18.415,4.004-29.263,5.146
                      c9.894,8.562,14.842,22.077,14.842,40.539v60.237c0,3.422,1.19,6.279,3.572,8.562c2.379,2.279,6.136,2.95,11.276,1.995
                      c44.163-14.653,80.185-41.062,108.068-79.226c27.88-38.161,41.825-81.126,41.825-128.906
                      C438.536,184.851,428.728,148.168,409.132,114.573z"/>
                  </svg>
              </a>
          </li>
      </ul>

      <p>&copy; 2016 Bright Inventions</p>
  </div>
</div>
</footer>

<!-- <script src="/assets/js/main.js"></script> -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-29336006-1', 'auto');
ga('send', 'pageview');

</script>
<!-- <script>
  var _gaq = _gaq || [];
  var pluginUrl =
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-56513184-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> -->


<script src="/assets/js/main.js" charset="utf-8"></script>
<script type="text/javascript">window.$czater||(function(d,s){var z=$czater=function(c){z._.push(c)},$=z.s=d.createElement(s),e=d.getElementsByTagName(s)[0];z.set=function(o){z.set._.push(o)};z._=[];z.set._=[];$.async=!0;$.setAttribute('charset','utf-8');$.src='https://www.czater.pl/assets/modules/chat/js/chat.js';z.t=+new Date;z.tok="c1af44fdd5fad14eba26292e64a9c65d6dc25613";z.domain="https://www.czater.pl/";$.type='text/javascript';e.parentNode.insertBefore($,e)})(document,'script' );</script>

</body>

</html>
